
# [阿里Java后端1-5面](https://www.nowcoder.com/discuss/429993?channel=1000&source_id=home_feed)

## **一面**

### 1、 触发新生代GC，如果存活对象总量大于survivor区容量，咋办

把无法容纳的对象直接放到老年代里（《Java虚拟机》-- 3.6.5 空间分配担保）



### 2、 如果任务很多，线程池的阻塞队列会撑爆内存的哪个区域

堆吧。。。



### 3、 栈在堆上吗

不是，栈的话独立分配了一个内存



### 4、 GC root有哪些

在Java语言里，固定可作为GC Roots对象的包括如下几种：

* 在虚拟机栈（栈帧中的本地变量表）中引用的对象，譬如各个线程中被调用的方法堆栈中使用到的参数、局部变量、临时变量等
* 在方法区中类静态属性引用的对象，譬如 Java 类的引用类型静态变量
* 在方法区中常量引用的对象，譬如字符串常量池（String Table）里的引用
* 在本地方法栈中 JNI（即通常所说的 Native 方法）引用的对象
* Java 虚拟机内部的引用，如基本数据类型对应的 Class 对象，一些常驻的异常对象（比如 NullPointException、OutOfMemoryError）等，还有系统类加载器
* 所有被同步锁（Synchronized 关键字）持有的对象
* 反映 Java 虚拟机内部情况的 JMXBean、JVMTI 中注册的回调、本地代码缓存等



### 5、 实例变量可以是GC root吗

可以的吧，按照上面的说法来看



### 6、 了解哪些GC算法，介绍一下

三种吧：
（1）准备一个区域，将对象复制过去然后清空。这个方法可以产生空间较大的连续内存空间
（2）将回收的对象当场回收，这样会产生很多碎片空间
（3）上面两者的结合



### 7、 给个场景，问怎么设置JVM参数

= =、不会设



### 8、 问了很多SQL调优，各种语句能不能命中索引，能命中哪些，怎么优化

这个看这说把，首先<>和!=运算是肯定不走索引的，or的话要看前后两个条件都需要有索引才走索引。



### 9、 MySQL的一张表里有三个字段ABC，A的种类有1000种，B有1W种，C有10W种，ABC的联合索引怎么设置，怎么使用

key index_C_B_A on test(c,b,a)
使用的话尽量按照上面这个顺序



### 10、 Mybatis # 和 $ 的区别

不造



### 11、 Mybatis接口里的方法和XML里的SQL名可以不一样吗，不一样怎么办

不造



### 12、 Mybatis是如何完成SQL和接口里的方法的映射的（我回答了怎么配置），那你知道它是怎么实现的吗

实际上应该还是拦截器和动态代理的方法。。。具体没研究过



### 13、 介绍下Spring的 IOC和AOP

IOC就是控制反转，通过XML配置信息或者注解实现容器的自动管理。比如说我们有一个service，在用的时候我们可以通过@Service将其装配到容器仓库，等到用的时候直接@Autowired就可以自动装载了，而不需要 new xxx 这样的做法。
AOP则是面向切面编程的缩写，Spring的AOP是利用动态代理技术实现AOP原理的。Spring中用了两种技术，一种是JDK的Proxy包，为接口动态生成代理类；一种是CGlib动态代理，在目标类加载后动态生成目标类的子类并把切面逻辑加进去



### 14、 服务器给客户端发送IO流的过程

（1）服务器建立socket，等待客户机连接
（2）客户机连接
（3）服务端write，客户机read



### 15、 IO和NIO了解多少

NIO是jdk1.4以后引入的，和IO的作用和目的相同，但是实现方式不同。
（1）IO是面向流的，NIO是面向缓冲区的。也就是说IO我们需要自己建立缓存区，而NIO用的时候就需要用ByteBuffer来做
（2）IO是阻塞的，NIO是非阻塞的。IO会等到所有要收到的数据全部收到后才能再去做其他事情，NIO允许一条线程从channel中读取数据，通过返回值来判断buffer中是否有数据，如果没有数据，NIO不会阻塞
（3）NIO允许一条线程去监控多个channels的输入
总结：
NIO允许你使用一个单独的线程或几个线程管理很多个channels，代价是处理逻辑更加复杂
如果连接比较多且每个连接发送数据比较少，用NIO比较合适，否则用IO更好



### 16、 线程都有哪些状态，怎么转换的

new、runnable、running、blocked、dead
初始化进入new状态，调用了start()方法后进入runnable状态，获得CPU后进入running状态，因为某些原因放弃CPU进入blocked状态，当sleep()结束或者IO处理完毕或者被唤醒进入runnble状态。当方法结束或者因为异常退出，则进入dead状态，不可复生



### 17、 Notify和notifyAll的区别

前者随机唤醒一个该锁的线程，后者是全部唤醒



### 18、 介绍线程池，不同线程池区别在哪，你平时怎么使用线程池的

线程池就是不需要代码自己创建线程，而是直接获取线程池中的线程，用完再还回去。相比手工创建和运行，能够降低线程创建和销毁的开销、提高响应速度、提高线程的可管理性。当你提交一个任务时，线程池首先会去看核心线程数是否达到上限，如果没有那就新建一个核心线程用来执行任务，否则去检查阻塞队列，如果阻塞队列未满，则加入阻塞队列，否则检查总线程数是否达到阈值，如果没有达到阈值，就建立一个非核心线程用来执行任务，否则执行线程池饱和策略。
核心线程数由 corePoolSize 参数决定，阻塞队列必须实现 BlockingQueue 接口，非核心线程达到存活的最长时间就销毁，饱和策略有：抛出异常（默认）、抛弃任务、抛弃最旧（下一个要运行）的任务、在主线程中执行任务。
不同线程池区别在于核心线程数是否固定、阻塞队列的实现（如ArrayBlockingQueue、LinkedBlockedQueue、PriorityBlockingQueue、DelayQueue、SynchronousQueue）、非核心线程数的最长存活时间等等参数的限定。



### 19、 MySQL索引的数据结构

实际上就是列（或者说属性）的B+树



### 20、 B+树了解多少

中间节点是空的，只有叶子节点存放数据。一个叶子节点存放多个数据。中心节点放子节点的最大或者最小值，只当索引。叶子节点还是一个链表。



### 21、 Cookie和SessionId说一下

由于 Http 是一种无状态的协议，为了识别连接的发起者是谁，需要应用层自己去实现，因此诞生了 Session 和 cookie。Session 是保存在服务器端，Cookie 保存在客户端。



### 22、 锁是怎么实现的

[AQS](https://www.cnblogs.com/fsmly/p/11274572.html)



### 23、 Synchronized同步块和synchronized方法，分别锁的是什么

同步块可以自己指定锁对象，synchronied 方法锁 this.class



### 24、 单例模式，饿汉和懒汉分别存在的问题

懒汉，线程不安全，没有加锁；
饿汉，浪费内存



### 25、 Volatile是怎么实现可见性的

[volatile](https://www.cnblogs.com/dolphin0520/p/3920373.html)
其实就是产生的汇编代码会导出一个lock前缀指令，这个指令会使当前处理器缓存的数据写回系统内存，并使其他缓存失效（使高速缓存中的值失效，而不是使CPU寄存器中的值失效！！！缓存一致性协议只针对缓存！）



### 26、 介绍下JMM

Java内存模型



### 27、 Happen before了解吗

八条 happen-before 原则：
* 程序次序规则：一个线程中的每个操作，happens-before于该线程中的任意后续操作；
* 锁定规则：对一个锁的解锁，happens-before于随后对这个锁的加锁；
* volatile变量规则：对一个volatile域的写，happens-before于任意后续对这个volatile域的读；
* 传递性：如果A happens-before B，且B happens-before C，那么A happens-before C；
* start()规则：如果线程A执行操作ThreadB.start()（启动线程B），那么A线程的ThreadB.start()操作happens-before于线程B中的任意操作；
* Join()规则：如果线程A执行操作ThreadB.join()并成功返回，那么线程B中的任意操作happens-before于线程A从ThreadB.join()操作成功返回；
* 程序中断规则：对线程interrupted()方法的调用先行于被中断线程的代码检测到中断时间的发生；
* 对象finalize规则：一个对象的初始化完成（构造函数执行结束）先行于发生它的finalize()方法的开始。



### 28、 A happen before B，意味着A一定在B之前执行吗

不一定，比如 `int a=0; int b=0;`这两条没有关联的命令可以重排序



### 29、 你做过的最难的项目中，最难的任务是什么，怎么解决的



## **二面**

### 1、 看过哪些源码？

= =、包装类型、HashMap、AQS、ReentrantLock等等



### 2、 Java都有哪些map，分别怎么实现的，具体讲

HashMap -> bucket + LinkedList/红黑树
LinkedHashMap -> bucket + LinkedList/红黑树 + 双向链表
ConcurrentHashMap -> HashMap + CAS + Synchronized
TreeMap -> 红黑树



### 3、 除了LinkedHashMap，你还知道哪些有序map

???LinkedHashMap 不是有序的啊！！！TreeMap 有序



### 4、 ConcurrentHashMap讲一讲

就是 HashMap + CAS + Synchronized 呗，每一个bucket 作为一个锁，在 putVal() 里面使用 synchronized 将该 bucket 锁住，并使用 CAS 去赋值



### 5、 为什么要有线程池

避免手动创建和销毁，这样太浪费资源了。节省时间，直接拿比创建更快。提高线程的可管理性



### 6、 线程池有哪几类？有什么区别？有哪些参数？拒绝策略有哪些

（1） FixedThreadPool -> 核心线程数 = 最大线程数，即全是核心线程没有非核心线程，阻塞队列是 LinkedBlockingQueue
（2）SingleThreadPool -> 只有一个核心线程，阻塞队列是 LinkedBlockingQueue，适用于多个线程线性执行的场景
（3）CachedThreadPool -> 没有核心线程，只有最大个非核心线程
参数有：核心线程数、最大线程数（核心+非核心）、最大存活时间、TimeUnit、阻塞队列、ThreadFactory 和一个 RejectedExecutionHandler
拒绝策略：
* 抛出异常
* 直接丢弃
* 抛弃最旧的
* 交给主线程执行



### 7、 阻塞队列都有哪几种，有什么区别

**这边博客还没写完！！！**



### 8、 Java的反射怎么理解

反射就是获取类的 class 文件，就知道了这个类的属性和方法，然后调用



### 9、 Spring的IOC和AOP怎么理解

IOC 控制反转，实现容器的自动管理，不需要我们自己去 new
AOP 切面，通过动态代理和反射去实现面向切面编程



### 10、 Spring项目启动的时候会加载哪些资源，顺序是怎么样的

**这个没看呢**



### 11、 浏览器输入一个URL，会发生什么，整个过程说一下

这是要问我 DNS 的意思吧。。
（1）首先查看浏览器缓存，找这个 URL 对应的 IP
（2）再找系统文件（WINDOWS c盘下面有个 host 文件），找这个 URL 对应的 IP
（3）再找路由器中缓存
（4）去找本地 DNS 服务器
（5）本地 DNS 服务器去找根域名服务器，没找到的话返回主域名服务器 IP
（6）本地 DNS服务器去找主域名服务器中，没找到的话返回下一级域名服务器
（7）本地 DNS服务器 再去找下一级
（8）找到后本地域名服务器保存到缓存，返回客户端



### 12、 Http讲一讲，请求有哪些内容，响应有哪些内容

请求报文：
* 请求行：方法 + （空格）+ URL + （空格） + 版本 + （CRLF，回车换行）
* 首部行：n * { 首部字段名 +（封号）+（空格）+ 值 + CRLF }
* CRLF
* 实体主体

响应报文：
* 状态行： 版本 + （空格）+ 状态码 + （空格） + 短语 + （CRLF，回车换行）
* 首部行：n * { 首部字段名 +（封号）+（空格）+ 值 + CRLF }
* CRLF
* 实体主体



### 13、 你笔试分好高，平时刷过很多题吗？怎么刷的？

呵呵，我没面！！！orz。。。。



## 三面（leader 面）

### 1、MySQL 的高可用了解多少，高性能了解多少



# [阿里三面，交叉面已过](https://www.nowcoder.com/discuss/230960?type=post&order=time&pos=&page=2&channel=666&source_id=search_post&subType=2)

## 三面

### 1. Set 了解过吗？知道 add（） 会出什么问题吗？（这题就是判断你是否是背题，没看到源码的很难说出来）

Set 是一个接口，在Java 中看过 HashSet 的源码。add() 底层其实就是将你的值作为 key，然后一个常量的 Object 对象 PRESENT 作为值调用 HashMap 的 putVal 方法。如果你的 key 存在的话，putVal 会返回原来的 value 也就是这个静态对象，而 add() 调用 putVal 的返回值不为 null 时会返回 false。在使用 HashMap 的 putVal 时，找对应节点使用的是 hashCode() 方法和 equals() 方法，因此对于一些我们自己写的对象进行 set 的存储时，需要重写这两个方法。



### 2. Http 报文里有什么？

Http 报文分为请求报文和响应报文，二者的格式不同。

![http 报文格式](https://uploader.shimo.im/f/F5VnZ5BeFL8iXPuj.jpeg!thumbnail)



### 3. Redis 源码读过吗？直接说源码

没有读过



### 4. Dubbo 源码读过吗？

没有。。。



### 5. 讲 Dubbo SPI 的源码？

不会



### 6. 讲 Dubbo 服务暴露源码 + Dubbo 服务注册

不会



### 7. 讲一下 Dubbo 服务引用底层？开始一直以为是动态调用 invoker 模型，结果说不够底层原理问 RPC 协议。

不会



### 8. 讲一下 Dubbo RPC 协议调用过程，使用哪些协议？

不会



### 9. 设计一个轻量级服务器，需要用到哪些技术。

Spring-boot + Mysql，按照需求可能会用到 nginx、rabbitmq、redis 等



### 10. 讲一下 Spring 源码一些东西？忘记说什么了。



### 11. 看你写了一些框架，能说说 Spring 中的设计模式吗？

单例、工厂、策略



### 12. ThreadLocal 了解过吗？（直接上源码来讲，最后讲了一下这个的应用会出什么问题，这里想暗示大佬问我 Mybatis 原理）

还行，关键在于 Thread 中的 ThreadLocalMap，和 ThreadLocal



### 13. 最近在学什么分布式技术吗？



### 14. 服务限流，服务隔离。

限流的话，可以通过 nginx，也可以用漏桶、令牌桶

服务隔离的话，可以通过微服务架构对服务进行拆分



### 15. 最开始问了项目里的 PV QPS 之类的，介绍自己的创业经历，项目经历之类的。



### 16. 反问环节？



## 交叉面

### 1. 实习项目里的业务



### 2. 问 Redis 集群，主备，集群持久化

Redis 的集群模式实际上就是将键分到多个节点上，每个节点都是主从模式。集群持久化的话应该是每个节点中的主从都要进行设置，避免数据丢失和主节点宕机导致数据不可用的问题。



### 3. Redis 做什么，好多，不记得了，问的很细。



### 4. Dubbo 源码读过吗？（三面面试官应该是说过了，就不继续下问，问更细节了）



### 5.  Dubbo 的连接（这里问的贼细，全靠推理推出来的。。）



### 6. Dubbo 的负载均衡



### 7. Dubbo 问的很细，忘记了，后面全靠推理推出来的



### 8. SpringBoot 用来做什么



### 9. OOM 遇到过吗？问实际解决方案，上线项目遇到过着问题，也分析了一波，顺利回答。



### 10. 为什么不选 SpringCloud，而选 Dubbo？



### 11. Mysql 索引原理

innodb 中的 B+ 树



### 12. B+树和红黑树区别（好久没见到基础题了！想哭）

B+ 树是对二叉查找树的一种改进，首先他中间节点不存储数据，只有在叶子节点才进行存储，并且所有叶子节点构成一个链表。

红黑树的话特征有五条：

* 节点非黑即红
* 叶子节点都是黑色
* 根节点是黑色
* 红色节点不能连续出现
* 从一个父节点到所有叶子节点的黑色节点数量相等

红黑树是一个不严格的二叉平衡树，通过4、5两条实现最长的路径不超过最短路径的两倍。



### 13. 算法，字符串翻转，如何做到最优

java 的话没办法在原数组上进行修改，因此只能新建一个数组。如果是单个字符串进行翻转，那么直接通过索引翻转即可。如果是每个字符串以空格相隔，那么首先将每个字符串进行翻转，再对整个字符串进行翻转。



### 14. 技术方面兴趣爱好。（我回答写框架算吗？应该是之前面试都是直接源码，就不问源码了）



### 15. 最近在看什么书？



### 16. JAVA 学了多久



### 17. 大数据了解过吗？不会呀



# [阿里Java面经，3技术面+2交叉面+1代码面+1HR面](https://www.nowcoder.com/discuss/461925?type=post&order=time&pos=&page=1&channel=666&source_id=search_post&subType=2)

## 一面

### 1. Spring bean 加载，实例化的过程

比较麻烦。在 fresh() 方法的 finishBeanFactoryInitialization() 中调用 preInstantiateSingletons() 方法，再调用 getBean()，如果没有的话会进行创建。等统一创建完了之后再 preInstantiateSingletons() 方法中会进行初始化以及 postProcessor 的回调。



### 2. Spring AOP源码看过吗

看过一点 @Aspect 注解的，他会由一个对应的 Creater 扫描带 @Aspect 注解的类，并且通过代理的方式生成相应的 Advisor。



### 3. java内存模型

略



### 4. 如果给你一个map，里面有很多很多对象，那么这个map存放在哪



### 5. GC算法？

三种，标记清除，标记复制，标记整理



### 6. 说一下CMS垃圾回收器

CMS 全程是 Concurrent Mark Sweep，是一种减少 STW 时间为目的的收集器。他是基于标记-清除算法实现的，整个过程分为四个步骤：

* 初始标记
* 并发标记
* 重新标记
* 并发清除

在 1，3 两个步骤需要 STW，其他时间可以和垃圾收集线程并发执行，以此来减少 STW 的时间。

缺点：

* 对处理器资源非常敏感，并发会导致应用程序变慢
* 无法处理浮动垃圾
* 碎片空间



### 7. 说一下你觉得你项目里的挑战



### 8. 说一下你的项目的收获



### 9. 你项目里用的什么数据库



### 10. 每天的数据量大概是多少，你的数据库



### 11. 你做了什么优化



### 12. 索引怎么建立的

对列进行 B+ 树化



### 13. 如果我有很多字段都需要建立索引，怎么办

联合索引代替单个分别建立



### 14. Mysql的存储引擎，你用的是哪种

innodb



### 15. 说一下 Innodb 数据库底层数据结构

底层是个 B+ 树



### 16. B+树的特征

内部节点不保存数据，数据都在叶子节点中




### 17. B+树和B树的区别？

同上



### 18. 说一下你常用的api和包

略



### 19. haspmap底层讲一讲

Bucket + LinkedList 或者 红黑树



### 20. 他是线程安全的吗

不是



### 21. 那么juc中对应的线程安全的类是什么

ConcurrentHashMap



### 22. ConcurrentHashMap的底层实现？

对 bucket 分段进行 synchronized，以及 CAS



### 23. 线程池，有哪几个参数，有哪几种，有哪些拒绝策略



### 24. 如果核心线程数量满了，阻塞队列也满了那么再来个任务是直接创建非核心线程还是进入队再出队再创建

创建非核心线程，如果非核心线程也满了，那就执行拒绝策略



### 25. 乐观锁，悲观锁



### 26. CAS是硬件实现还是软件实现

软件，其实就是一个乐观锁



### 27. volatile是锁吗？

不是



### 28. 除了wait和notifyall，还有什么办法实现类似的功能

ReentrantLock 的 Condition。

### 29. 说几个你平时比较喜欢的APP



### 30. 淘宝，你觉得他是怎么做推荐的



### 31. 用户下完单之后都发生了什么



### 32. 淘宝和京东的区别，你觉得是什么



### 33. 网易云音乐，你觉得他的推荐是怎么做的



### 34. 如果有上百万的音乐，我要根据某一列进行排序，只显示前100条，怎么做（TOP K）



## 代码面

### 1. 设计一个多线程打印程序，第i个线程只打印i-1数字，比如第1个线程打印数字0，第2个线程只打印数字1，依次类推。任意给定一个数字序列，比如3382019835830，能够使用该程序打印出来。



### 2. 共计9个苹果，有2只猴子，一个猴子每次拿2个苹果，一个猴子每次拿3个苹果，如果剩余的苹果不够猴子每次拿的数量，则2只猴子停止拿苹果，请用java多线程模拟上面的描述，要求性能尽可能高效（这个题开始是用可重入锁写的，结束之后自己本地测试发现程序不会自动结束，后来改成用AtomicInteger和cas来实现了）



### 3. 快速找出一个数组中的两个数字，让这两个数字之和等于一个给定的值，为了简化起见，我们假设这个数组中肯定存在至少一组符合要求的解。

假如有如下数组，如图所示：5，6，1，4，7，9，8 给定Sum= 10



## 二面技术面

### 1. 项目相关



### 2. 数据库的隔离级别

四种

* 读未提交

* 读已提交

* 可重复读

* 串行化

  

### 3. 知道什么是主从复制吗？

知道



### 4. 你说一下建立索引的规则



### 5. JAVA类加载机制（加载验证准备解析初始化，又说到双亲委派模型）



### 6. 线程池所有参数讲一讲



### 7. ConcurrentHashMap的底层实现



### 8. RPC用过吗



### 9. 消息队列呢？



## 三面技术面

### 1. 项目相关



### 2. 个人问题



### 3. 线程间通信有哪些方式（加锁，内存屏障）

* Object 类的 wait、notify
* ReentrantLock 的 Condition
* 使用 volatile 修饰的共享变量
* 利用 LockSupport

### 4. 线程池的参数详细说说（帽子戏法）



### 5. NIO，说一下



### 6. 你项目为什么不用NIO



### 7. RPC，有了解吗（没了解）



### 8. 让你设计远程调用的rpc框架



## 交叉一面

### 1. 说下你在实验室的研究方向



### 2. 说下项目



### 3. 为什么用udp



### 4. 用tcp服务器负载高在什么地方



### 5. 数据库，怎么设计的



### 6. TCP三次握手



### 7. 算法题：按照出现次数降序输出一个字符串中出现的所有大写字母（口述快排）



### 8. 你有什么想问的吗



## 交叉二面

### 1. 自我介绍



### 2. 项目



### 3. 如果现在改成要求实时性非常强的那种情景，你怎么设计



### 4. JMM



### 5. 算法题：小括号中括号大括号，要求给出这个表达式是否符合要求，即不出现那种 ( } 的情况



----------
# 冈哥拿阿里 offer 的流程

## 一面

### 1. 自我介绍

略



### 2. 获得什么奖项荣誉？

略



### 3. 数组链表以及哈希表的区别

数组的话其实就是一个空间连续的列表，访问指定位置的元素可以通过下标直接访问，时间复杂度为 O(1)，查询元素的时间复杂度 O(n)，添加、删除指定元素的时间复杂度为 O(n)。具体实现比如说 ArrayList。

链表的话则是通过节点和指针构建的一个列表，访问指定位置的元素需要从头结点进行遍历，因此时间复杂度为 O(n)，查询元素的时间复杂度为 O(n)，添加、删除节点的时间复杂度为 O(1)。具体实现比如说 LinkedList。

哈希表的实现通常是一个数组，存储的是 key-value 对。通过 key 的 hash 值计算在数组中的相应位置，将 value 存储在指定位置。添加、删除的时间复杂度都为 O(1)，查询的时间复杂度也为 O(1)，但是需要考虑哈希碰撞等因素。



### 4. 红黑树你知道嘛？

红黑树是对二叉查找树的一种改进，是一种自平衡的二叉查找树，但又不是严格的二叉平衡树。通常由以下五种性质：

* 节点要么是红色，要么是黑色；
* 根节点都是黑色的；
* 叶子节点都是黑色的（叶子节点都为 null）；
* 每个红色节点的两个子节点都是黑色。（从每个叶子到根的所有路径上不能有两个连续的红色节点）；
* 从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。

其中第四点和第五点保证了根节点到叶子节点最长路径不会超过最短路径的两倍。如果发生节点的添加或者删除的时候，就需要进行树的旋转（左旋、右旋）来保证性质。



### 5. B 树你知道嘛？

知道，B 树是二叉查找树，他满足这样的性质，左子树中的节点都比父节点要小，右子树中的节点逗比父节点要大。当然了，这是在二叉的情况下，如果是多叉的情况下，大致性质不变，但是每个节点可能保存不止一个元素。



### 6. 能用一句话描述 B 树的特性吗？就是他能解决什么问题？

emmmm。。。左子树 < 父节点 < 右子树？解决了查询问题，时间复杂度为 O(logn)。当然通过前序遍历还能完成比如说查询 3-5 元素的个数等功能。



### 7. 动态规划和贪心的区别，各举例说明？

动态规划是将问题分解成若干个子问题，通过求解子问题然后求出我们要求的问题。比如说一个简单的台阶问题，`dp[n]`可以分解为`dp[n-1]`和`dp[n-2]`。

贪心问题可以分成两部分，一部分是贪心的策略，通常都是“最xxx”的，一部分是局部最优解。比如说背包问题，贪心策略基本有三种，选最贵的，选最重的，选性价比最高的，不同的策略下进行局部最优解的选取。但是，最后不是所有结局都是对的，只有对的策略 + 局部最优解才行，比如说上面背包问题，只有性价比最高的才可以。



### 8. 举两种排序算法并分析其时间复杂度以及其最差和最优的情况

快排和堆排吧。

快排就是一种分治的思想，选取一个基准值，将比基准值小的放到一遍，比基准值大的放到另外一边，然后对每一个区间再次进行排序。时间复杂度最优为 O(nlogn)，在元素有序的情况下最差为 O(n^2)。

堆排的话就是构建一棵树，子节点的值都比父节点的值要大或者小，这得根据堆是大根堆还是小根堆来决定。通常实现的话都是通过一个数组，插入元素的话都是从根节点开始比较，然后往下放。取出元素只能取出根节点，然后将叶子节点的值取出，从根节点往下比，进行堆的重建。时间复杂度最优最差都是 O(nlogn)。



### 9. 分析归并排序的时间复杂度

O(nlogn)



### 10. 为什么叫快速排序？

之前看过一个知乎，说是因为他的时间复杂度为 O(nlogn)，比 O(n^2) 要快，其实完全没有意义。。。



### 11. Http 协议，TCP 以及 UDP 协议的区别

Http 协议是基于 TCP 的应用层协议，常用于浏览器和服务器之间的请求/响应传递。

Http 请求响应步骤如下：

* 客户端向服务器的 HTTP 端口（默认是 80）发起 TCP 请求并建立连接
* 浏览器发出 HTTP 请求
* 服务器通过 HTTP 响应将文件发送给浏览器
* TCP 连接释放，这是在默认情况下，即短连接的情况下，如果在长连接的情况下，TCP 不释放
* 客户端（浏览器）解析客户端发回来的文件

TCP 和 UDP 的区别：

* 首先，TCP 和 UDP 都是传输层的协议，TCP 全称是数据传输协议，传输单元是报文段，UDP 全称是用户数据报协议，传输单元是数据报。
* 其次，TCP 是可靠的，通过建立连接之后，通过序号、确认、重传的方式来保证报文段的完整、有序到达，因此 TCP 适用于一些需要可靠性强的传输场景。UDP 是不可靠的，不需要建立连接，校验仅通过对首部、伪首部的二进制反码求和再取反，因此 UDP 适用于一些可靠性不那么高的，反而对实时性高的场景，比如语音、视频会议。
* TCP 还有流量控制和拥塞控制的功能，UDP 没有



### 12. TCP 协议是第几层

第四层，传输层



### 13. TCP 建立连接的过程

三次握手



### 14. 为什么需要编码

编码是为了在数据传输的过程中节省数据存储空间，可以节省带宽，加快传输速度。



### 15. GBK 和 UTF 编码的原理

GBK 使用单双字节编码，对于英文使用单字节，对于中文使用双字节。

UTF-8 使用变长字节编码，对于 Ascii 码使用单字节，对一些简单地文字比如说阿拉伯文这种使用两字节，对中韩等复杂的文字使用三字节，对其他的使用四个字节



### 16. 进程和线程的区别

* 进程是操作系统分配资源的最小单位，线程是程序执行的最小单位；
* 进程有自己的独立地址空间，每启动一个进程，系统就会为它分配地址空间，建立数据表来维护代码段、堆栈段和数据段，这种操作非常昂贵。而线程是共享进程中的数据的，使用相同的地址空间，因此 CPU 切换一个线程的花费远比进程要小很多，同时创建一个线程的开销也比进程要小很多。
* 线程之间的通信更方便，同一进程下的线程共享全局变量、静态变量等数据，而进程之间的通信需要管道、FIFO、消息队列、信号量、共享存储、套接字的方式进行。



### 17. 进程间通信的方式

管道、FIFO、消息队列、信号量、共享存储、套接字



### 18. 进程间内存不是独立的嘛，怎么共享？

进程间内存时独立的，但是可以通过对一块公共内存将其地址映射到自己的虚拟空间从而进行调用的方法进行共享。



### 19. 具体操作系统指令是啥

emmm。。。只知道 shmget 创建， shmat 读取，其他不太懂



### 20. 进程的用户态和内核态有什么区别，什么时候会进行切换

这个不太懂，只知道在用户空间下执行，我们把此时运行得程序的这种状态成为用户态，而当这段程序执行在内核的空间执行时，这种状态称为内核态。切换的话有三种方式：系统调用、异常、外围设备的中断



### 21. java 的 object 有什么方法，什么场景会用到

wait、notify 用于线程间通信，equals 方法用于比较，getClass 方法获取类对象，clone 方法进行拷贝，hashCode 方法用于计算哈希值，finalize 方法用于销毁对象



### 22. Java 的异常分类大致怎么样

Java 的 Throwable 分为两大类，分别是 Error 和 Exception，Error 代表意料外的、严重的错误，无法处理，Exception 则表示一些意料之内的、应该捕获的异常。除了 Error 和 RuntimeException 之外，其他的都是受查异常，要被显式捕捉。RuntimeException 比如说 XMLParseException、IndexOutOfBoundsException、NullPointException 等等。



### 23. 面向对象的三个特征

封装、继承、多态



### 24. 设计原则有哪些

emmmm。。。比如说开闭原则、单一原则、迪米特原则？



### 25. 常用的设计模式你了解哪些

单例、工厂、装饰器、适配器、代理、过滤器、责任链、迭代器等等



### 26. 什么是线程安全

线程安全就是在多线程情况下，保证共享数据的正确性



### 26. 有哪些无锁的线程安全的类

原子工具类、ThreadLocal



### 27. ThreadLocal 有用过嘛？

其实本质上用的是一个内部类 ThreadLocalMap，实现在 Thread 类中。使用的时候，通过线程去获取 ThreadLocalMap，再通过 ThreadLocal 作为键去获取值。



### 28. 虚引用以及其他引用类型有了解嘛

只知道强引用、弱引用、软引用、虚引用。越来越容易被回收。



### 29. 分布式CAP理论你知道吗

CAP 理论其实是指 一致性（Consistensy）、可用性（Availability）以及分区容错性（Patition tolerence）。这个理论是将一个分布式系统最多只能满足上面的两项，比如当网络出错时，在满足分区容错性的情况下，需要舍弃一致性或者是可用性。



### 30. 数据库索引优化你知道吗

* 尽量选择惟一性索引；
* 为经常需要排序、分组和联合操作的字段建立索引；
* 为常作为查询条件的字段建立索引；
* 限制索引的数目，索引越多，更新和插入的效率越低；
* 尽量使用数据量少的索引；
* 组合索引中的尽量把能过滤掉更多数据的字段放在前面，把最经常使用的字段放在前面（最左原则）；
* 尽量使用前缀来索引，针对长文本，TEXT等类型；
* 删除不再使用或者很少使用的索引；
* 数据是动态变化中的，索引的使用也需要根据数据的变化而变化。



### 31. 数据库索引的使用

使用么，就是建立索引，使用索引字段进行查询等操作



### 32. 索引覆盖的原理懂吗

索引覆盖就是指查询的字段都在索引里面了，原理不太懂



### 33. 你最近有学什么新技术嘛?



### 34. 那你是怎么学习的？



### 35. 那 redis 有什么特性？他和 mysql 数据库有什么区别？



### 36. 在你项目中有什么技术难点或者有挑战的地方



### 37. 优化结果怎么样？



### 38. java8 以上版本的新特性



### 39. Spring 新版本有什么特性



### 40. 其他开源框架最近发布的新特性



### 41. git向远端push了错误代码你会怎么办

如果说就一两个版本，那就 git reset 一下然后重新推。如果说涉及到版本很多、多个人员的版本，那就 bash，删除代码。或者偷懒一点，回退到之前的版本然后重新创建一个分支。



## 二面

两个项目大概聊了半小时，一共面了67分钟，其中八九分钟是反问环节

### 1.详细问了科研人员画像项目



### 2.问了研究生系统项目



### 3.给你一个用户交易表，数据量很大，如何进行分表。

注意：有这样的应用场景（用户需要查询自己的购买记录，店铺也需要查询他店铺商品的购买记录）



### 4.我有一个论文表，现在已经进行分表了，分成了十个表，需要查询top10,那第11-20呢



### 5.通过关键词（iPhone 11）去检索，这时候会有两个服务，一个服务是直接获取数据，另一个服务是根据用户个性化排序任务，如果这个排序服务不稳定，如何让调用方在它好的时候使用，不好的时候则不使用




# 自己的

## 一面

### 1. 项目相关问题



### 2. nginx 用了一致性 hash 有啥好处？



### 3. 还有什么其他负载均衡策略？



### 4. 一致性 hash 和轮询比有什么好处？



### 5. CocurrentHashMap 底层



### 6. 垃圾回收算法，不是判断是否是垃圾的那个



### 7. 判断一个对象需不需要被回收



### 8. volatile 关键字



### 9. 能不能用 volatile 代替锁



### 10. 怎么样的场景下不适合用 volatile？



### 11. Spring 有什么模块？



### 12. Spirng 的启动过程



### 13. 手撕代码

#### 第一题：数组

##### a. 输入一个数组，让你直接输出元素右边第一个大于他的值

##### b. 如果改成最近（左右都行）的呢？


####  第二题：字符串

##### a. 查找字符串中最长不重复字符子串



### 总结

项目的知识点不够细，代码风格要注意



## 四面交叉面

### 1. 介绍一下项目的主要情况，多少人开发，架构 palapala



### 2. 给我实现一款垃圾收集器，可以用空间换时间



### 3. 对 G1 进行调优



### 4. 对 md5 了解么？实现下 md5 验证的算法？为什么 String 的 hashcode 乘子要用 31？



### 5. 项目里面有什么是你做的



### 6. rabbitmq 和 kafka 做对比



### 7. 消息队列源码



### 8. 学习以来两件比较有挑战的事情



### 9. 有什么要问我的



### 总结

太难了。。。